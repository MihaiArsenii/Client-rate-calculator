<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Client Rate Calculator | GestioStaff</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@600;700;800&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#08090d;
      --card:#0f1118;
      --card2:#13161f;
      --muted:#6b7585;
      --muted2:#8e99aa;
      --text:#e8edf5;
      --accent:#ffd54a;
      --accent-dim:rgba(255,213,74,.14);
      --accent-border:rgba(255,213,74,.32);
      --green:#58d68d;
      --red:#ff6b6b;
      --line:rgba(255,255,255,.06);
      --shadow: 0 12px 40px rgba(0,0,0,.45);
      --radius:16px;
    }
    *{ box-sizing:border-box; margin:0; padding:0; }

    body{
      font-family:'DM Sans', sans-serif;
      background:
        radial-gradient(ellipse 900px 500px at 15% -5%, rgba(255,213,74,.09), transparent 60%),
        radial-gradient(ellipse 700px 500px at 85% 5%, rgba(80,160,255,.07), transparent 55%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 32px 16px 64px;
    }

    .wrap{ max-width: 860px; margin: 0 auto; }

    /* ── HEADER ── */
    .header{
      display:flex; justify-content:space-between; align-items:flex-start;
      gap:16px; flex-wrap:wrap; margin-bottom: 28px;
    }
    .brand{ display:flex; gap:14px; align-items:center; }
    .logo{
      width:44px; height:44px; border-radius:14px;
      background: rgba(255,213,74,.12);
      border:1px solid rgba(255,213,74,.25);
      display:flex; align-items:center; justify-content:center;
      flex-shrink:0;
      box-shadow: 0 0 24px rgba(255,213,74,.12);
    }
    .logo svg{ width:22px; height:22px; }
    .brand-text h1{
      font-family:'Syne', sans-serif;
      font-size:17px; font-weight:700; letter-spacing:.3px;
    }
    .brand-text .sub{
      margin-top:5px; color:var(--muted2); font-size:13px; line-height:1.5;
    }
    .pill{
      display:inline-flex; align-items:center; gap:6px;
      padding:7px 13px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(15,17,24,.7);
      color:var(--muted2); font-size:12px;
      white-space:nowrap; align-self:center;
    }

    /* ── CARD ── */
    .card{
      background:rgba(15,17,24,.9);
      border:1px solid rgba(255,255,255,.07);
      border-radius:20px;
      padding:24px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    /* ── SECTION LABELS ── */
    .section-label{
      font-family:'DM Mono', monospace;
      font-size:10.5px; letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:14px;
    }

    /* ── INPUTS GRID ── */
    .inputs-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-bottom:20px;
    }
    @media(max-width:580px){ .inputs-grid{ grid-template-columns:1fr; } }

    .field{
      background:var(--card2);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px 16px;
      transition: border-color .2s, box-shadow .2s;
      position:relative;
    }
    .field:focus-within{
      border-color: rgba(255,213,74,.45);
      box-shadow: 0 0 0 3px rgba(255,213,74,.10);
    }
    .field label{
      display:block;
      font-size:12px; color:var(--muted2); margin-bottom:8px; line-height:1.3;
    }
    .input-wrap{
      display:flex; align-items:center; gap:8px;
    }
    .prefix{
      font-family:'DM Mono', monospace;
      font-size:18px; font-weight:500;
      color:var(--muted2);
    }
    input[type="number"], select{
      width:100%; background:transparent;
      border:none; outline:none;
      color:var(--text);
      font-family:'DM Mono', monospace;
      font-size:22px; font-weight:500;
      -moz-appearance:textfield;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; }

    select{
      font-family:'DM Sans', sans-serif;
      font-size:15px;
      cursor:pointer;
    }
    select option{ background:#13161f; color:var(--text); }

    /* NMW warning */
    .nmw-warning{
      display:none;
      margin-top:8px;
      padding:7px 10px;
      border-radius:8px;
      background:rgba(255,107,107,.10);
      border:1px solid rgba(255,107,107,.25);
      font-size:12px;
      color:var(--red);
      line-height:1.4;
    }
    .nmw-warning.visible{ display:block; }

    /* ── DIVIDER ── */
    .divider{
      display:flex; align-items:center; gap:12px;
      margin-bottom:16px;
    }
    .divider::before, .divider::after{
      content:''; flex:1; height:1px;
      background:var(--line);
    }
    .divider span{
      font-family:'DM Mono', monospace;
      font-size:10px; letter-spacing:.12em; text-transform:uppercase;
      color:var(--muted); white-space:nowrap;
    }

    /* ── RESULTS GRID ── */
    .results{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      margin-bottom:20px;
    }
    @media(max-width:700px){ .results{ grid-template-columns:1fr 1fr; } }
    @media(max-width:400px){ .results{ grid-template-columns:1fr; } }

    .metric{
      border-radius:14px;
      border:1px solid rgba(255,255,255,.07);
      background:rgba(10,12,18,.6);
      padding:14px 16px;
      display:flex; flex-direction:column; gap:6px;
    }
    .metric.featured{
      border-color:rgba(255,213,74,.28);
      background:rgba(255,213,74,.06);
    }
    .metric .k{
      font-size:11px; color:var(--muted2); line-height:1.3;
    }
    .metric .v{
      font-family:'DM Mono', monospace;
      font-size:22px; font-weight:500; letter-spacing:-.5px;
      line-height:1;
    }
    .metric .v .unit{
      font-size:12px; font-weight:400; color:var(--muted); margin-left:3px;
    }
    .metric .v.accent{ color:var(--accent); }

    /* shift total */
    .shift-banner{
      border-radius:14px;
      border:1px solid rgba(88,214,141,.22);
      background:rgba(88,214,141,.06);
      padding:14px 18px;
      display:flex; justify-content:space-between; align-items:center;
      flex-wrap:wrap; gap:8px;
      margin-bottom:20px;
    }
    .shift-banner .sb-label{
      font-size:13px; color:var(--muted2);
    }
    .shift-banner .sb-label span{
      color:var(--text); font-weight:500;
    }
    .shift-banner .sb-value{
      font-family:'DM Mono', monospace;
      font-size:26px; font-weight:500;
      color:var(--green); letter-spacing:-.5px;
    }
    .shift-banner .sb-value .unit{
      font-size:13px; color:var(--muted2); margin-left:4px;
    }

    /* ── NOTICE ── */
    .notice{
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(10,12,18,.5);
      padding:16px 18px;
      color:var(--muted2);
      font-size:12.5px;
      line-height:1.65;
      margin-bottom:20px;
    }
    .notice strong{ color:var(--text); font-weight:500; }

    /* ── ACTIONS ── */
    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-bottom:20px;
    }
    button{
      cursor:pointer; border:none; outline:none;
      font-family:'DM Sans', sans-serif;
      font-weight:500; font-size:13.5px;
      border-radius:12px;
      padding:11px 18px;
      transition: filter .15s, transform .1s, box-shadow .15s;
    }
    button:active{ transform: translateY(1px); }

    .btn-primary{
      background:var(--accent);
      color:#0b0c0f;
      box-shadow: 0 4px 18px rgba(255,213,74,.22);
      text-decoration:none;
      display:inline-flex; align-items:center; gap:7px;
    }
    .btn-primary:hover{ filter:brightness(1.08); }

    .btn-secondary{
      background:rgba(255,255,255,.07);
      border:1px solid var(--line);
      color:var(--text);
    }
    .btn-secondary:hover{ background:rgba(255,255,255,.1); }

    .btn-ghost{
      background:transparent;
      border:1px solid var(--line);
      color:var(--muted2);
    }
    .btn-ghost:hover{ background:rgba(255,255,255,.05); }

    /* ── FOOTER ── */
    .footer-row{
      display:flex; justify-content:space-between; flex-wrap:wrap; gap:8px;
      font-size:12px; color:var(--muted);
    }
    a{ color:var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    /* ── ANIMATIONS ── */
    @keyframes fadeUp{
      from{ opacity:0; transform:translateY(10px); }
      to{ opacity:1; transform:translateY(0); }
    }
    .card{ animation: fadeUp .4s ease both; }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- Header -->
    <div class="header">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M20 12a8 8 0 1 1-2.2-5.6" stroke="rgba(255,213,74,.95)" stroke-width="2.2" stroke-linecap="round"/>
            <path d="M20 12h-6" stroke="rgba(255,213,74,.95)" stroke-width="2.2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="brand-text">
          <h1>Client Rate Calculator</h1>
          <div class="sub">Enter the worker's pay rate to instantly see your all-in hourly cost. Excludes VAT.</div>
        </div>
      </div>
      <div class="pill">GestioStaff Limited</div>
    </div>

    <!-- Main Card -->
    <div class="card">

      <!-- Inputs -->
      <div class="section-label">1 — Enter details</div>
      <div class="inputs-grid">

        <!-- Worker pay input -->
        <div class="field">
          <label for="workerPay">Worker pay rate (£/hour)</label>
          <div class="input-wrap">
            <span class="prefix">£</span>
            <input id="workerPay" type="number" min="0" step="0.01" value="13.00" inputmode="decimal" aria-describedby="nmwWarning" />
          </div>
          <div class="nmw-warning" id="nmwWarning" role="alert">
            ⚠ Below the National Living Wage (£11.44/hr for 21+). Please verify the applicable rate for this worker's age.
          </div>
        </div>

        <!-- Shift hours -->
        <div class="field">
          <label for="shiftHours">Shift length (hours)</label>
          <div class="input-wrap">
            <input id="shiftHours" type="number" min="1" max="24" step="0.5" value="8" inputmode="decimal" />
            <span style="font-size:13px;color:var(--muted2);white-space:nowrap">hrs</span>
          </div>
        </div>

        <!-- Number of workers -->
        <div class="field">
          <label for="numWorkers">Number of workers</label>
          <div class="input-wrap">
            <input id="numWorkers" type="number" min="1" max="500" step="1" value="1" inputmode="numeric" />
            <span style="font-size:13px;color:var(--muted2);white-space:nowrap">staff</span>
          </div>
        </div>

      </div>

      <!-- Divider -->
      <div class="divider"><span>Estimated breakdown</span></div>

      <!-- Hourly Results -->
      <div class="results" aria-live="polite" aria-atomic="true">
        <div class="metric">
          <div class="k">Worker pay rate</div>
          <div class="v"><span id="displayPay">£0.00</span><span class="unit">/hr</span></div>
        </div>
        <div class="metric">
          <div class="k">Holiday pay (12.07%)</div>
          <div class="v"><span id="displayHoliday">£0.00</span><span class="unit">/hr</span></div>
        </div>
        <div class="metric">
          <div class="k">Total worker pay</div>
          <div class="v"><span id="displayTotalWorker">£0.00</span><span class="unit">/hr</span></div>
        </div>
        <div class="metric featured">
          <div class="k">Estimated client cost</div>
          <div class="v accent"><span id="displayClient">£0.00</span><span class="unit">/hr</span></div>
        </div>
      </div>

      <!-- Shift/total banner -->
      <div class="shift-banner">
        <div class="sb-label">
          Total for <span id="bannerDesc">1 worker × 8hrs</span>
        </div>
        <div class="sb-value">
          <span id="displayTotal">£0.00</span><span class="unit">total ex VAT</span>
        </div>
      </div>

      <!-- Breakdown notice -->
      <div class="notice">
        <strong>What's included in the client rate:</strong><br>
        Holiday pay · Employer National Insurance · Employer pension contributions · GestioStaff agency fee.
        <br><br>
        <strong>Important:</strong> This is an indicative estimate only. Rates may vary for last-minute bookings, premium venues, complex shifts, or specialist roles. The NI calculation assumes a 40-hour equivalent week; actual NI may differ for single short shifts. Any variation is typically minor. For an exact quote confirmed in writing, please contact us.
        <!-- Last verified: April 2025 | NMW £11.44 (21+) | NI secondary threshold £96/wk | Pension lower threshold £6.32/wk -->
      </div>

      <!-- Actions -->
      <div class="actions">
        <a class="btn-primary" href="https://www.gestiostaff.com/request-staff" target="_blank" rel="noopener">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none">
            <path d="M5 12h14M13 6l6 6-6 6" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Request staff at this rate
        </a>
        <button class="btn-secondary" id="copyQuote">Copy estimate</button>
        <button class="btn-ghost" id="reset">Reset</button>
      </div>

      <!-- Footer row -->
      <div class="footer-row">
        <span>All figures exclude VAT. For guidance only.</span>
        <span>Questions? <a href="mailto:info@gestiostaff.com">info@gestiostaff.com</a></span>
      </div>

    </div><!-- /card -->
  </div><!-- /wrap -->

<script>
  // ─────────────────────────────────────────
  // ASSUMPTIONS — review each April when HMRC/DWP update thresholds
  // Last verified: April 2025
  // ─────────────────────────────────────────
  const ASSUMPTIONS = {
    holidayPct: 0.1207,               // 12.07% holiday uplift (statutory)
    pensionPct: 0.03,                 // 3% employer pension
    pensionWeeklyThreshold: 6.32,     // £6.32/wk qualifying earnings lower threshold (2024/25)
    marginPerHour: 3.50,              // GestioStaff agency margin
    employerNIRate: 0.15,             // 15% above secondary threshold (April 2025)
    weeklySecondaryThreshold: 96,     // £96/wk secondary threshold (2024/25) — verify April 2026
    assumedWeeklyHours: 40,           // assumed for NI per-hour estimate
    nmwRate: 11.44,                   // NLW for 21+ (2024/25) — verify April 2026
  };

  // ─────────────────────────────────────────
  // Elements
  // ─────────────────────────────────────────
  const els = {
    workerPay:          document.getElementById('workerPay'),
    shiftHours:         document.getElementById('shiftHours'),
    numWorkers:         document.getElementById('numWorkers'),
    displayPay:         document.getElementById('displayPay'),
    displayHoliday:     document.getElementById('displayHoliday'),
    displayTotalWorker: document.getElementById('displayTotalWorker'),
    displayClient:      document.getElementById('displayClient'),
    displayTotal:       document.getElementById('displayTotal'),
    bannerDesc:         document.getElementById('bannerDesc'),
    nmwWarning:         document.getElementById('nmwWarning'),
    copyQuote:          document.getElementById('copyQuote'),
    reset:              document.getElementById('reset'),
  };

  // ─────────────────────────────────────────
  // Helpers
  // ─────────────────────────────────────────
  function money(n){
    const safe = Number.isFinite(n) ? Math.max(0, n) : 0;
    return "£" + safe.toFixed(2);
  }

  function calcClientRate(workerPay){
    const holiday = workerPay * ASSUMPTIONS.holidayPct;

    // Employer pension — only apply above weekly qualifying threshold
    const weeklyGross = workerPay * ASSUMPTIONS.assumedWeeklyHours;
    const pension = weeklyGross > ASSUMPTIONS.pensionWeeklyThreshold
      ? workerPay * ASSUMPTIONS.pensionPct
      : 0;

    // NI: per-hour estimate based on assumed weekly hours
    const weeklyNI = Math.max(
      0,
      (weeklyGross - ASSUMPTIONS.weeklySecondaryThreshold) * ASSUMPTIONS.employerNIRate
    );
    const niPerHour = weeklyNI / ASSUMPTIONS.assumedWeeklyHours;

    return workerPay + holiday + pension + niPerHour + ASSUMPTIONS.marginPerHour;
  }

  // ─────────────────────────────────────────
  // Render
  // ─────────────────────────────────────────
  function render(){
    const pay       = Math.max(0, parseFloat(els.workerPay.value) || 0);
    const hours     = Math.max(0, parseFloat(els.shiftHours.value) || 0);
    const workers   = Math.max(1, parseInt(els.numWorkers.value) || 1);

    const holiday       = pay * ASSUMPTIONS.holidayPct;
    const totalWorker   = pay + holiday;
    const clientRate    = calcClientRate(pay);
    const shiftTotal    = clientRate * hours * workers;

    // Update metrics
    els.displayPay.textContent         = money(pay);
    els.displayHoliday.textContent     = money(holiday);
    els.displayTotalWorker.textContent = money(totalWorker);
    els.displayClient.textContent      = money(clientRate);
    els.displayTotal.textContent       = money(shiftTotal);

    // Banner description
    const workerLabel = workers === 1 ? '1 worker' : `${workers} workers`;
    const hourLabel   = hours === 1 ? '1hr' : `${hours}hrs`;
    els.bannerDesc.textContent = `${workerLabel} × ${hourLabel}`;

    // NMW warning — show if pay is below NMW and pay > 0
    const belowNMW = pay > 0 && pay < ASSUMPTIONS.nmwRate;
    els.nmwWarning.classList.toggle('visible', belowNMW);
  }

  // Reset role dropdown when user manually edits pay
  els.workerPay.addEventListener('input', () => {
    render();
  });

  // ─────────────────────────────────────────
  // Copy estimate (with execCommand fallback)
  // ─────────────────────────────────────────
  function buildQuoteText(){
    const pay       = Math.max(0, parseFloat(els.workerPay.value) || 0);
    const hours     = Math.max(0, parseFloat(els.shiftHours.value) || 0);
    const workers   = Math.max(1, parseInt(els.numWorkers.value) || 1);
    const holiday   = pay * ASSUMPTIONS.holidayPct;
    const totalW    = pay + holiday;
    const client    = calcClientRate(pay);
    const shiftTot  = client * hours * workers;
    const workerLabel = workers === 1 ? '1 worker' : `${workers} workers`;

    return `GestioStaff – Rate Estimate (ex VAT)
Worker pay rate:    ${money(pay)}/hr
Holiday pay:        ${money(holiday)}/hr
Total worker pay:   ${money(totalW)}/hr
Estimated client cost: ${money(client)}/hr

Shift total: ${money(shiftTot)} (${workerLabel} × ${hours}hrs)

Includes: holiday pay, employer NI, employer pension & GestioStaff agency fee.
For an exact quote: info@gestiostaff.com`;
  }

  async function copyText(text){
    try {
      await navigator.clipboard.writeText(text);
      return true;
    } catch {
      // Fallback for older browsers / non-HTTPS
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.cssText = 'position:fixed;opacity:0;top:0;left:0;';
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        return true;
      } catch { return false; }
    }
  }

  els.copyQuote.addEventListener('click', async () => {
    const success = await copyText(buildQuoteText());
    els.copyQuote.textContent = success ? 'Copied ✓' : 'Copy failed';
    setTimeout(() => els.copyQuote.textContent = 'Copy estimate', 1200);
  });

  // ─────────────────────────────────────────
  // Reset
  // ─────────────────────────────────────────
  els.reset.addEventListener('click', () => {
    els.workerPay.value  = '13.00';
    els.shiftHours.value = '8';
    els.numWorkers.value = '1';
    render();
  });

  els.shiftHours.addEventListener('input', render);
  els.numWorkers.addEventListener('input', render);

  render();
</script>
</body>
</html>
